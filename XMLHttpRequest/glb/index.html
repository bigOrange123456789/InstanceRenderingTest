<!DOCTYPE html>
<html lang="en">
	<head>
		<title>MEETING</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {overflow:hidden;}
		</style>
	</head>

	<body>

	<script src="js/lib/threeJS/three.js"></script>
	<script src="js/lib/threeJS/GLTFLoader.js"></script>
	<script src="js/playerControl/PlayerControl.js"></script>
	<script src="js/Main.js"></script>

	<script  type="module">
		var myMain = new Main();
		myMain.start();
		//myMain.renderer.setClearColor(0x00FF00,0)
		myMain.scene.background = new THREE.Color( 0xcce0ff );
		//myMain.scene.fog = new THREE.Fog( 0xcce0ff, 500, 10000 );
		new PlayerControl(myMain.camera);

		var oReq = new XMLHttpRequest();
		oReq.open("POST", "http://localhost:8080", true);
		oReq.responseType = "arraybuffer";
		oReq.onload = function () {//接收数据
			var unitArray=new Uint8Array(oReq.response)
			new THREE.GLTFLoader().parse(unitArray.buffer, './', glb=> {
				console.log(glb)
				myMain.scene.add(glb.scene)
			});
		};
		oReq.send(JSON.stringify({ 'fileName':'test.glb'}));//发送请求
	</script>
	</body>
</html>
