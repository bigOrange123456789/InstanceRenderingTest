function ParamMeasure(obj,type){
    this.obj=obj;//animation
    this.type=type;
    this.beforeKey=-1;//type记录是THREEJS对象(0)还是引擎对象（1）
    this.stepPosition=1;//
    this.stepRotation=1;
    this.stepScale=1;
    this.boneIndex=7;
    this.frameIndex=0;
    this.obj0={position:{},scale:{},rotation:{}};
    this.quaternion2euler=function (quaternion) {
        var euler=new THREE.Euler(0,0,0, 'XYZ');
        euler.setFromQuaternion(quaternion);
        return euler;
    }
    this.euler2quaternion=function (euler) {
        var quaternion=new THREE.Quaternion();
        quaternion.setFromEuler(euler);
        return quaternion;
    }
    this.init=function () {
        var This=this;//beforeKey = -1;

        function loop() {
            var i=This.boneIndex;
            var time=This.frameIndex;//修改地0帧的数据
            var obj={};
            var animation=This.obj;
            obj.position={};
            obj.position.x=animation.tracks[3*i].values[3*time];
            obj.position.y=animation.tracks[3*i].values[3*time+1];
            obj.position.z=animation.tracks[3*i].values[3*time+2];
            obj.rotation={};
            var quaternion=new THREE.Quaternion();
            quaternion.set(
                animation.tracks[3*i+1].values[4*time],
                animation.tracks[3*i+1].values[4*time+1],
                animation.tracks[3*i+1].values[4*time+2],
                animation.tracks[3*i+1].values[4*time+3],
            );
            var euler=This.quaternion2euler(quaternion);
            obj.rotation.x=euler.x;
            obj.rotation.y=euler.y;
            obj.rotation.z=euler.z;
            This.obj0=obj;
            requestAnimationFrame(loop);
        }loop();


        //0 14举手
        //1 2 鼓掌
        //3 4 5 6静止
        //7 8 9抱胸
        //10 11托腮
        //12 13后仰放松
        //

        //开始测试

        var step=this.stepPosition;//
        var stepRotation=0.3;
        document.onkeydown = function (e) {
            //7,8,9,10
            var obj=This.obj0;
            var time=This.boneIndex;


            if (e.key === "t") obj.position.x += step;
            else if (e.key === "g") obj.position.x -= step;
            else if (e.key === "r") obj.position.y += step;
            else if (e.key === "y") obj.position.y -= step;
            else if (e.key === "f") obj.position.z += step;
            else if (e.key === "h") obj.position.z -= step;
            else if (e.key === "v")
                console.log(
                    "["+
                        i+","+//骨骼
                        time+","+//帧数
                        obj.position.x+","+obj.position.y+","+obj.position.z+","+
                        quaternion.x+","+quaternion.y+","+quaternion.z+","+quaternion.w+
                    "],"
                );
            if (e.key === '=') {
                 if (This.beforeKey === '4') obj.rotation.x +=stepRotation;
                else if (This.beforeKey === '5') obj.rotation.y +=stepRotation;
                else if (This.beforeKey === '6') obj.rotation.z +=stepRotation;
            } else if (e.key === '-') {
                if (This.beforeKey === '4') obj.rotation.x -=stepRotation;
                else if (This.beforeKey === '5') obj.rotation.y -=stepRotation;
                else if (This.beforeKey === '6') obj.rotation.z -=stepRotation;
            }
            if (e.key === '1' || e.key === '2' || e.key === '3'||e.key === '4' || e.key === '5' || e.key === '6') This.beforeKey = e.key;


            This.update();
        }
        //this.set();
    }

    this.update=function () {
        var This=this;
        var time=this.frameIndex;
        var i=This.boneIndex;
        var obj=this.obj0;
        var rx=obj.rotation.x,ry=obj.rotation.y,rz=obj.rotation.z;
        This.obj.tracks[3*i].values[3*time]=obj.position.x;
        This.obj.tracks[3*i].values[3*time+1]=obj.position.y;
        This.obj.tracks[3*i].values[3*time+2]=obj.position.z;

        quaternion=This.euler2quaternion(new THREE.Euler(rx,ry,rz, 'XYZ'));
        This.obj.tracks[3*i+1].values[4*time]=quaternion.x;
        This.obj.tracks[3*i+1].values[4*time+1]=quaternion.y;
        This.obj.tracks[3*i+1].values[4*time+2]=quaternion.z;
        This.obj.tracks[3*i+1].values[4*time+3]=quaternion.w;
    };
    this.frameCopy=function (i_start,i_end) {
        animation=this.obj;
        //var i_start=0,i_end=35;
        var time0=i_start,time1=i_end;
        //for()
        for(var i=0;i<25;i++){//25个骨头
            var position=animation.tracks[3*i].values;
            var quaternion=animation.tracks[3*i+1].values;

            //for(var time=1;time<=34;time++){
                position[3*time1  ]=position[3*time0  ];
                position[3*time1+1]=position[3*time0+1];
                position[3*time1+2]=position[3*time0+2];

                quaternion[4*time1  ]=quaternion[4*time0  ];
                quaternion[4*time1+1]=quaternion[4*time0+1];
                quaternion[4*time1+2]=quaternion[4*time0+2];
                quaternion[4*time1+3]=quaternion[4*time0+3];
            //}
        }
    }

    this.init();//执行

    //以下是用于初始化时修改动画的代码
    this.setAnimation=function (data,time) {
        //举起左手
        var datas=data;

        for(var i=0;i<datas.length;i++)
            this.setBone(datas[i],time);
    }
    this.setBone=function (data,time) {
        var i=data[0];
        if(typeof(time)==="undefined")time=data[1];

        this.obj.tracks[3*i].values[3*time]=data[2];
        this.obj.tracks[3*i].values[3*time+1]=data[3];
        this.obj.tracks[3*i].values[3*time+2]=data[4];

        this.obj.tracks[3*i+1].values[4*time]=data[5];
        this.obj.tracks[3*i+1].values[4*time+1]=data[6];
        this.obj.tracks[3*i+1].values[4*time+2]=data[7];
        this.obj.tracks[3*i+1].values[4*time+3]=data[8];
    }
    this.set=function () {
        //鼓掌
        this.setAnimation(
            [[0,0,-0.21575161814689636,-38.924495697021484,-54.877281188964844,-0.560836911201477,-0.42228567600250244,0.5853135585784912,0.4056412875652313],[1,0,-0.4874242842197418,7.927768707275391,-5.960464477539063e-8,-0.01512816734611988,0.00022225524298846722,-0.002643319545313716,0.9998820424079895],[2,0,0.0000057220458984375,9.266521453857422,-2.5022241928721675e-23,-0.011112025007605553,-0.004555956926196814,-0.13870306313037872,0.9902611970901489],[3,0,0.000003814697265625,10.590322494506836,-5.790239675410951e-23,-0.013173894956707954,-0.0037766986060887575,-0.1385597139596939,0.9902593493461609],[4,0,0.000006661340194114018,11.914095878601074,-1.9360365699808287e-22,0.012444796971976757,0.000657889642752707,0.06667943298816681,0.9976966381072998],[5,0,0.40158843994140625,6.922981262207031,2.0293120059111961e-16,0.037885699421167374,0.019344884902238846,0.05323014408349991,0.9976758360862732],[6,0,1.1744370460510254,20.246105194091797,-2.3841856489070778e-7,-1.0031726560555398e-9,-4.532373765187003e-8,1.3091607797832694e-9,1],[7,0,-0.09006024897098541,10.171510696411133,-4.664562702178955,0.06576313078403473,-0.5632122159004211,0.8222277164459229,0.049080751836299896],[8,0,0.00000795161940914113,10.021270751953125,-0.000008984548912849277,0.41028496623039246,0.07352680712938309,0.3848523199558258,0.8234978914260864],[9,0,4.8170545596804e-7,20.837299346923828,-2.000002384185791,-0.334964394569397,0.39424288272857666,0.6046012043952942,0.6056639552116394],[10,0,-1.788135932656587e-7,23.69284439086914,-0.0000031925742405292112,-4.2165626723544847e-7,-3.534369170665741e-7,3.2596336740908782e-9,1],[11,0,-0.12407920509576797,10.173603057861328,4.664560794830322,0.8251380324363708,-0.02015777677297592,0.017339278012514114,0.564305305480957],[12,0,-0.000003764450411836151,10.021260261535645,-0.000002166051672247704,0.42347291111946106,-0.012946092523634434,-0.36256858706474304,0.8300886154174805],[13,0,-3.999995231628418,20.83322525024414,2.000000238418579,0.49227848649024963,0.522361159324646,-0.38123807311058044,0.582630455493927],[14,0,0.000015541911125183105,25.693950653076172,-0.0000048577762754575815,-1.7411528219213324e-8,0.2955201268196106,-2.4683554755711157e-8,0.9553365111351013],[15,0,0.057089537382125854,-4.416308403015137,-7.831920623779297,-0.05263287574052811,0.06989932805299759,-0.7960202693939209,0.5989121794700623],[16,0,-4.598636849095783e-8,45.40013885498047,-4.556457255944224e-8,-0.06544866412878036,-0.02527390979230404,-0.8063868284225464,0.5872120261192322],[17,0,-7.536504540439637e-7,48.852088928222656,-0.0000018591993011796148,0.43559345602989197,-0.5844413638114929,0.4463110864162445,0.5191273093223572],[18,0,3.3840262858575443e-7,12.231062889099121,0.000012429474736563861,0.2470104694366455,-0.0687798410654068,0.01758129708468914,0.9664088487625122],[19,0,0.0000014156109955365537,6.133963108062744,0.000004917388196190586,6.199135871298722e-9,-0.0000026940360839944333,-3.3760443329811096e-9,1],[20,0,0.03117653727531433,-4.416308403015137,7.8319196701049805,0.02379585988819599,-0.08618183434009552,-0.7951123714447021,0.5998357534408569],[21,0,-0.000003877175004163291,45.39842224121094,-2.8251480443941546e-7,0.06962750852108002,0.006404696498066187,-0.8021194934844971,0.5930559039115906],[22,0,4.795434733750881e-7,48.84587860107422,-0.0000016073043980213697,0.4110371470451355,-0.5365365743637085,0.4637643098831177,0.5727998614311218],[23,0,-0.000001947792725331965,12.336885452270508,9.849327398114838e-7,0.24478311836719513,0.06870441138744354,-0.017395444214344025,0.9669841527938843],[24,0,-0.00000412762119594845,6.175222873687744,-0.0000022500257728097495,-0.0000012483360478654504,0.000007123413979570614,-7.494222842296949e-8,1]]
        );
        this.setAnimation(
            [[0,0,-0.21575161814689636,-38.924495697021484,-54.877281188964844,-0.560836911201477,-0.42228567600250244,0.5853135585784912,0.4056412875652313],[1,0,-0.4874242842197418,7.927768707275391,-5.960464477539063e-8,-0.01512816734611988,0.00022225524298846722,-0.002643319545313716,0.9998820424079895],[2,0,0.0000057220458984375,9.266521453857422,-2.5022241928721675e-23,-0.011112025007605553,-0.004555956926196814,-0.13870306313037872,0.9902611970901489],[3,0,0.000003814697265625,10.590322494506836,-5.790239675410951e-23,-0.013173894956707954,-0.0037766986060887575,-0.1385597139596939,0.9902593493461609],[4,0,0.000006661340194114018,11.914095878601074,-1.9360365699808287e-22,0.012444796971976757,0.000657889642752707,0.06667943298816681,0.9976966381072998],[5,0,0.40158843994140625,6.922981262207031,2.0293120059111961e-16,0.037885699421167374,0.019344884902238846,0.05323014408349991,0.9976758360862732],[6,0,1.1744370460510254,20.246105194091797,-2.3841856489070778e-7,-1.0031726560555398e-9,-4.532373765187003e-8,1.3091607797832694e-9,1],[7,0,-0.09006024897098541,10.171510696411133,-4.664562702178955,0.06576313078403473,-0.5632122159004211,0.8222277164459229,0.049080751836299896],[8,0,0.00000795161940914113,10.021270751953125,-0.000008984548912849277,0.41028496623039246,0.07352680712938309,0.3848523199558258,0.8234978914260864],[9,0,4.8170545596804e-7,22.837299346923828,-0.000002416199549770681,-0.21401338279247284,0.0005711077828891575,0.7530152201652527,0.6222266554832458],[10,0,-1.788135932656587e-7,23.69284439086914,-0.0000031925742405292112,-4.2165626723544847e-7,-3.534369170665741e-7,3.2596336740908782e-9,1],[11,0,-0.12407920509576797,10.173603057861328,4.664560794830322,0.8251380324363708,-0.02015777677297592,0.017339278012514114,0.564305305480957],[12,0,-0.000003764450411836151,10.021260261535645,-0.000002166051672247704,0.42347291111946106,-0.012946092523634434,-0.36256858706474304,0.8300886154174805],[13,0,-3.999995231628418,20.83322525024414,2.000000238418579,0.4383237659931183,0.5680066347122192,-0.3805243968963623,0.5834740400314331],[14,0,0.000015541911125183105,23.693950653076172,-0.0000048577762754575815,-1.131585580793626e-8,-8.610695800825852e-8,-2.2337145466622133e-8,1],[15,0,0.057089537382125854,-4.416308403015137,-7.831920623779297,-0.05263287574052811,0.06989932805299759,-0.7960202693939209,0.5989121794700623],[16,0,-4.598636849095783e-8,45.40013885498047,-4.556457255944224e-8,-0.06544866412878036,-0.02527390979230404,-0.8063868284225464,0.5872120261192322],[17,0,-7.536504540439637e-7,48.852088928222656,-0.0000018591993011796148,0.43559345602989197,-0.5844413638114929,0.4463110864162445,0.5191273093223572],[18,0,3.3840262858575443e-7,12.231062889099121,0.000012429474736563861,0.2470104694366455,-0.0687798410654068,0.01758129708468914,0.9664088487625122],[19,0,0.0000014156109955365537,6.133963108062744,0.000004917388196190586,6.199135871298722e-9,-0.0000026940360839944333,-3.3760443329811096e-9,1],[20,0,0.03117653727531433,-4.416308403015137,7.8319196701049805,0.02379585988819599,-0.08618183434009552,-0.7951123714447021,0.5998357534408569],[21,0,-0.000003877175004163291,45.39842224121094,-2.8251480443941546e-7,0.06962750852108002,0.006404696498066187,-0.8021194934844971,0.5930559039115906],[22,0,4.795434733750881e-7,48.84587860107422,-0.0000016073043980213697,0.4110371470451355,-0.5365365743637085,0.4637643098831177,0.5727998614311218],[23,0,-0.000001947792725331965,12.336885452270508,9.849327398114838e-7,0.24478311836719513,0.06870441138744354,-0.017395444214344025,0.9669841527938843],[24,0,-0.00000412762119594845,6.175222873687744,-0.0000022500257728097495,-0.0000012483360478654504,0.000007123413979570614,-7.494222842296949e-8,1]]
            ,35
        );
    }
    this.set();


}